import {initializeApp as a} from'https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js';import {getAnalytics as b,logEvent as c} from'https://www.gstatic.com/firebasejs/10.8.1/firebase-analytics.js';import {getAuth as d,GoogleAuthProvider as A,setPersistence as f,browserLocalPersistence as g,onAuthStateChanged as h,signInWithCredential as i} from'https://www.gstatic.com/firebasejs/10.8.1/firebase-auth.js';import {getFirestore as j,doc as k,addDoc as l,setDoc as m} from'https://www.gstatic.com/firebasejs/10.8.1/firebase-firestore.js';var n=a({apiKey:'AIzaSyCtwnmQBV6-iDsHlA_U9trjbA40ge20LUw',authDomain:'interactive-learning-rus.firebaseapp.com',projectId:'interactive-learning-rus',storageBucket:'interactive-learning-rus.appspot.com',messagingSenderId:'702837617087',appId:'1:702837617087:web:65e8a1d20c412dd56a710a',measurementId:'G-DF5YB7X77S'}),o=d(n),p=b(n),q=j(n);let r=null;async function s(_){await f(o,g);await i(o,A.credential(_.credential))}window.handleCredentialResponse=s;h(o,B=>{if(B){r=B;window.user=B;c(p,'user_logged_in',{email:B.email,videoId:window.videoId,subjectId:window.subjectId});var C=new CustomEvent('loggedIn', {detail:B});window.dispatchEvent(C)}});async function t(){try {await o.signOut();var _a=new CustomEvent('loggedOut');window.dispatchEvent(_a)} catch (D) {}}window.signOut=t;function u(_A,_b){r?c(p,'user_open_video',{email:r.email,videoId:_A,subjectId:_b}):c(p,'user_open_video',{email:'anonymous',videoId:_A,subjectId:_b})}window.analyticUserOpenVideo=u;async function v(E,_B){try {var _c=await l(collection(q,E),_B);return _c.id} catch (e) {throw e}}window.addDataToCollection=v;async function w(aA){if(!r||!r.email)return;var aB=r.email.replace(/\./g,'_');try {var _C=k(q,'answers',aB);await m(_C,aA)} catch (aC) {}}window.addOrUpdateGraphByEmail=w;
